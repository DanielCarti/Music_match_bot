# Как разместить Telegram-бота на PythonAnywhere

Это пошаговое руководство поможет вам разместить вашего бота на PythonAnywhere, чтобы он работал 24/7.

### Шаг 1: Регистрация и подготовка

1.  **Создайте аккаунт:** Перейдите на [PythonAnywhere](https://www.pythonanywhere.com/pricing/) и создайте бесплатный аккаунт ("Beginner").
2.  **Подтвердите email:** После регистрации подтвердите свой email. Это необходимо для доступа к внешним сайтам, включая API Telegram.

### Шаг 2: Загрузка кода

1.  **Перейдите в раздел "Files":** В панели управления PythonAnywhere откройте вкладку **"Files"**.
2.  **Создайте папку для проекта:** В поле "Enter new directory name" введите название для вашего проекта (например, `telegram-bot`) и нажмите **"New directory"**.
3.  **Перейдите в созданную папку:** Нажмите на имя папки, чтобы войти в нее.
4.  **Загрузите файлы:** Нажмите **"Upload a file"** и загрузите два файла из вашего проекта:
    *   `main.py`
    *   `requirements.txt`

### Шаг 3: Настройка окружения и установка библиотек

1.  **Откройте консоль Bash:** Перейдите на вкладку **"Consoles"** и запустите новую **"Bash"** консоль.
2.  **Создайте виртуальное окружение:** Введите в консоли следующую команду, заменив `my-venv` на любое имя для вашего окружения и выбрав нужную версию Python (например, 3.10):
    ```bash
    mkvirtualenv my-venv --python=/usr/bin/python3.10
    ```
    Ваша консоль автоматически активирует это окружение.
3.  **Перейдите в папку с проектом:**
    ```bash
    cd telegram-bot
    ```
4.  **Установите зависимости:** Выполните команду для установки всех библиотек из вашего `requirements.txt`:
    ```bash
    pip install -r requirements.txt
    ```

### Шаг 4: Настройка переменных окружения

Вам не нужно устанавливать переменные окружения напрямую. Вместо этого мы будем использовать специальный файл, который PythonAnywhere подгружает автоматически.

1.  **Перейдите в папку `.virtualenvs`:**
    ```bash
    cd ~/.virtualenvs/my-venv/bin/
    ```
    (Замените `my-venv` на имя вашего виртуального окружения).
2.  **Откройте файл `postactivate` для редактирования:**
    ```bash
    nano postactivate
    ```
3.  **Добавьте ваши токены:** В открывшемся редакторе добавьте следующие строки, подставив свои реальные значения:
    ```bash
    export TELEGRAM_BOT_TOKEN="ВАШ_ТОКЕН"
    export SPOTIPY_CLIENT_ID="ВАШ_ID_КЛИЕНТА_SPOTIFY"
    export SPOTIPY_CLIENT_SECRET="ВАШ_СЕКРЕТ_КЛИЕНТА_SPOTIFY"
    export VK_ACCESS_TOKEN="ВАШ_ТОКЕН_VK"
    ```
4.  **Сохраните и закройте файл:**
    *   Нажмите `Ctrl + X`
    *   Нажмите `Y` для подтверждения
    *   Нажмите `Enter` для сохранения

5.  **Перезапустите консоль:** Закройте текущую Bash консоль и откройте новую. Это нужно, чтобы переменные окружения загрузились.

### Шаг 5: Настройка задачи "Always-on"

Это главный шаг, который заставит вашего бота работать постоянно.

1.  **Перейдите в раздел "Tasks":** Откройте вкладку **"Tasks"**.
2.  **Создайте новую задачу:** В разделе **"Always-on tasks"** нажмите **"Add new Always-on task"**.
3.  **Введите команду для запуска:** В появившемся окне введите команду. **Важно:** вам нужно указать полный путь к вашему виртуальному окружению и к скрипту `main.py`. Команда будет выглядеть так:
    ```bash
    /home/ВАШ_НИКНЕЙМ/.virtualenvs/my-venv/bin/python /home/ВАШ_НИКНЕЙМ/telegram-bot/main.py
    ```
    *   Замените `ВАШ_НИКНЕЙМ` на ваш никнейм на PythonAnywhere.
    *   Замените `my-venv` на имя вашего виртуального окружения.
    *   Замените `telegram-bot` на имя папки вашего проекта.

4.  **Нажмите "Add task"**. Задача будет создана и запущена.

### Шаг 6: Проверка логов

1.  На той же странице **"Tasks"** вы можете нажать на иконку файла логов рядом с вашей задачей.
2.  В лог-файле вы увидите все сообщения от вашего бота, включая ошибки, если они возникнут. Это поможет вам понять, все ли работает правильно.

Готово! Теперь ваш бот размещен на PythonAnywhere и будет работать 24/7.
